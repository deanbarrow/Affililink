var affililink,curronload,newonload;affililink=function(){var a,b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q;b={"amazon.co.uk":"affililink-21","amazon.com":"affililink-20","amazon.de":"","amazon.fr":""};f={campaign:5336854507,country:"UK"};a=document.getElementsByTagName("a");i=window.location.hostname;q=[];for(k=0,n=a.length;k<n;k++){j=a[k];if(!(j.href.substring(0,7)==="http://"||j.href.substring(0,8)==="https://")){continue}e=j.href.split("/")[2];if(!e){continue}else{if(f["campaign"]&&f["country"]){h=["ebay.com.au","ebay.at","ebay.be","ebay.ca","ebay.ch","ebay.de","ebay.es","ebayanuncios.es","ebay.fr","ebay.ie","ebay.it","ebay.nl","ebay.co.uk","ebay.com","half.com"];for(l=0,o=h.length;l<o;l++){g=h[l];if(!(e===g||e.substring(e.length-g.length-1)==="."+g&&e!=="rover.ebay.com")){continue}switch(f["country"]){case"AT":f["code"]="5221-53469-19255-0";break;case"AU":f["code"]="705-53470-19255-0";break;case"BE":f["code"]="1553-53471-19255-0";break;case"CA":f["code"]="706-53473-19255-0";break;case"CH":f["code"]="5222-53480-19255-0";break;case"DE":f["code"]="707-53477-19255-0";break;case"ES":f["code"]="1185-53479-19255-0";break;case"FR":f["code"]="709-53476-19255-0";break;case"IE":f["code"]="5282-53468-19255-0";break;case"IT":f["code"]="724-53478-19255-0";break;case"NL":f["code"]="1346-53482-19255-0";break;case"UK":f["code"]="710-53481-19255-0";break;case"US":f["code"]="711-53200-19255-0"}if(e.substring(e.length-"half.com".length)==="half.com"){j.href="http://rover.ebay.com/rover/1/8971-56017-19255-0/1?ff3=8&pub=5574962087&toolid=10001&campid="+f["campaign"]+"&customid=affililink&mpre="+encodeURIComponent(j.href)}else{j.href="http://rover.ebay.com/rover/1/"+f["code"]+"/1?ff3=4&pub=5574962087&toolid=10001&campid="+f["campaign"]+"&customid=affililink&mpre="+encodeURIComponent(j.href)}}}d=["amazon.co.uk","amazon.com","amazon.de","amazon.fr"];for(m=0,p=d.length;m<p;m++){c=d[m];if(!(e===c||e.substring(e.length-c.length-1)==="."+c)){continue}if(b[c]){j.href=j.href.replace(/tag=([a-z0-9\-]+)/g,"")}j.href=j.href.replace("&&","&");if(j.href.substring(-1,1)==="/"){j.href=j.href.substring(0,j.href.length-1)}if(!j.href.split("/")[3]){j.href+="?tag="+b[c]}else{j.href+="&tag="+b[c]}}}}return q};if(window.attachEvent){window.attachEvent("onload",affililink)}else{if(window.onload){curronload=window.onload;newonload=function(){curronload();return affililink()};window.onload=newonload}else{window.onload=affililink}}
